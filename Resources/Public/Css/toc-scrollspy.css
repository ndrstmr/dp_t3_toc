/**
 * Table of Contents - Scrollspy Active State Styling
 *
 * Visual feedback for active navigation items when scrollspy is enabled
 * Uses CSS custom properties from toc-base.css (vanilla baseline)
 * Framework-agnostic - works with vanilla, Bootstrap, and Kern UX
 *
 * CSS Architecture:
 * - toc-base.css (vanilla) OR toc-bootstrap.css OR toc-kern.css defines custom properties
 * - toc-scrollspy.css (this file) uses those custom properties
 *
 * Dependencies: toc-base.css (or framework enhancement layer)
 */

/* ====================================================================
   Scrollspy Active State - Vanilla Baseline
   ==================================================================== */

/* Sidebar Layout - Bootstrap Scrollspy (no border, only font-weight) */
.toc--sidebar .toc__item {
    padding: var(--toc-space-sm) var(--toc-space-md);
}

/* Active state - applied to list item (font-weight on link) */
[data-toc-scrollspy="true"] .toc--sidebar .toc__item.active .toc__link {
    font-weight: var(--toc-font-weight-bold);
}

/* Hover state - same as active */
[data-toc-scrollspy="true"] .toc--sidebar .toc__link:hover {
    font-weight: var(--toc-font-weight-bold);
    text-decoration: none;
}

/* Focus state (accessibility) */
[data-toc-scrollspy="true"] .toc--sidebar .toc__link:focus-visible {
    outline: calc(var(--toc-border-width) * 2) solid var(--toc-color-primary);
    outline-offset: calc(var(--toc-border-width) * 2);
}

/* ====================================================================
   Kern UX Template - Using Kern Custom Properties
   ==================================================================== */

/* Sidebar Layout - Kickstarter Design */
.kern-toc--sidebar .kern-toc__item {
    border-left: 4px solid var(--toc-color-border);
    transition: border-color 0.2s ease-in-out;
    padding: var(--toc-space-sm) var(--toc-space-md);
}

/* Active state - applied to list item (Kickstarter style) */
[data-toc-scrollspy="true"] .kern-toc--sidebar .kern-toc__item.active {
    border-left-color: var(--toc-color-primary);
}

[data-toc-scrollspy="true"] .kern-toc--sidebar .kern-toc__item.active .kern-toc__link {
    font-weight: var(--toc-font-weight-bold);
}

/* Hover state - same as active */
[data-toc-scrollspy="true"] .kern-toc--sidebar .kern-toc__item:hover {
    border-left-color: var(--toc-color-primary-hover);
}

[data-toc-scrollspy="true"] .kern-toc--sidebar .kern-toc__link:hover {
    font-weight: var(--toc-font-weight-bold);
    text-decoration: none;
}

/* Focus state (WCAG 2.1 compliant) */
[data-toc-scrollspy="true"] .kern-toc--sidebar .kern-toc__link:focus-visible {
    outline: calc(var(--toc-border-width) * 2) solid var(--toc-color-primary);
    outline-offset: calc(var(--toc-border-width) * 2);
}

/* ====================================================================
   Dark Mode Support (Automatic via CSS Custom Properties)
   ==================================================================== */

/**
 * Dark mode is automatically handled by framework layers:
 * - toc-base.css: @media (prefers-color-scheme: dark)
 * - toc-bootstrap.css: [data-bs-theme="dark"]
 * - toc-kern.css: [data-kern-theme="dark"] + @media (prefers-color-scheme: dark)
 *
 * All frameworks override --toc-color-* custom properties in dark mode,
 * so no additional dark mode CSS needed here!
 */

/* ====================================================================
   Smooth Scrolling Enhancement
   ==================================================================== */

html {
    scroll-behavior: smooth;
}

/* Offset for sticky header (adjust if your site has a sticky header) */
[data-toc-scrollspy="true"] {
    scroll-padding-top: 100px;
}

/* ====================================================================
   Accessibility: Reduced Motion
   ==================================================================== */

@media (prefers-reduced-motion: reduce) {
    [data-toc-scrollspy="true"] .toc__link,
    [data-toc-scrollspy="true"] .kern-toc__link,
    [data-toc-scrollspy="true"] .toc__item,
    [data-toc-scrollspy="true"] .kern-toc__item {
        transition: none;
    }

    html {
        scroll-behavior: auto;
    }
}
